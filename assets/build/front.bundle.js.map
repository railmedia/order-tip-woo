{"version":3,"file":"front.bundle.js","mappings":"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","sources":["webpack://order-tip-woo/external var \"jQuery\"","webpack://order-tip-woo/./assets/src/js/front/front.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from 'jquery';\n\n(function($) {\n\n    const orderTipPlacedEvent = new CustomEvent('wootipplaced');\n    const orderTipRemove      = new CustomEvent('wootipremove');\n\n    const WooOrderTip = {\n\n        selectTip: trigger => {\n\n            const applyTip = trigger.parent().find('button.woo_order_tip_apply');\n     \n            jQuery('.woo_order_tip').removeClass('active');\n     \n            trigger.addClass('active');\n     \n            const tip = trigger.data('tip');\n     \n            if( tip == 'custom' ) {\n                applyTip.toggle();\n                trigger.parent().find('.woo_order_tip_custom_text').toggle().focus();\n            } else {\n                WooOrderTip.applyTip( trigger );\n            }\n         \n        },\n\n        applyTip: trigger => {\n\n            const container     = trigger.parents('#wooot_order_tip_form'),\n                tip_type        = container.find('.woo_order_tip.active').data('tip-type'),\n                tip_type_symbol = tip_type == '1' ? '%' : wootip.cs,\n                tip_custom      = container.find('.woo_order_tip.active').data('tip-custom'),\n                tip_cash        = container.find('.woo_order_tip.active').data('tip-cash'),\n                tip_recurring   = container.find('#woo_recurring_tip').is(':checked');\n            \n            let errors = 0,\n                tip    = container.find('.woo_order_tip.active').data('tip');\n\n            tip = tip && 'custom' !== tip && 'number' === typeof tip ? Math.abs( tip ) : tip;\n\n            const tip_label = tip + tip_type_symbol\n            \n            if( tip == 'custom' ) {\n\n                tip = container.find('.woo_order_tip_custom_text').val();\n\n                if( ! tip || parseInt( tip ) == 0 ) {\n                    container.find('.woo_order_tip_custom_text').css('border', '1px solid red').focus();\n                    errors = 1;\n                    return false;\n                } else {\n                    container.find('.woo_order_tip_custom_text').css('border', 'initial');\n                    errors = 0;\n                }\n\n            }\n\n            if( ! errors ) {\n\n                jQuery('.woocommerce').block({message: ''});\n\n                jQuery.ajax({\n                    type: \"POST\",\n                    url: wootip.au,\n                    dataType: 'json',\n                    data: ({\n                        action: 'apply_tip', \n                        tip: tip, \n                        tip_type: tip_type, \n                        tip_label: tip_label, \n                        tip_custom: tip_custom, \n                        tip_cash: tip_cash, \n                        tip_recurring: tip_recurring, \n                        security: wootip.n\n                    }),\n                    success: function (tipApplied) {\n\n                        if( tipApplied.status && 'success' === tipApplied.status ) {\n                            if( tip_custom ) {\n                                jQuery('.woo_order_tip[data-tip=\"custom\"]').text( wootip.s.cut + ' (' + wootip.cs + tip.replace( ',', wootip.ds ).replace( '.', wootip.ds ) + ')' );\n                            }\n                            jQuery('body').trigger( 'update_checkout' );\n                            if( jQuery( 'button[name=\"update_cart\"]' ).length ) {\n                                jQuery( 'button[name=\"update_cart\"]' ).attr('aria-disabled', false).removeAttr('disabled').trigger('click');\n                            }\n                            \n                            jQuery('.woo_order_tip_remove').show();\n                            jQuery('.woo_order_tip_apply').hide();\n                            jQuery('.woo_order_tip_custom_text').hide();\n\n                            document.dispatchEvent(orderTipPlacedEvent);\n\n                            jQuery('.woocommerce').unblock();\n                            \n                        }\n\n                    }\n                });\n\n            }\n\n        },\n\n        removeTip: () => {\n\n            if( wootip.eart == '1' ) {\n\n                if( confirm( wootip.s.rtc ) === true ) {\n                    WooOrderTip.doRemoveTip();\n                }\n        \n            } else {\n                WooOrderTip.doRemoveTip();\n            }\n\n        },\n\n        doRemoveTip: () => {\n\n            jQuery('.woocommerce').block({message: ''});\n\n            jQuery.ajax({\n                type: \"POST\",\n                url: wootip.au,\n                dataType: 'html',\n                data: ({action: 'remove_tip', security: wootip.n2}),\n                success: function (tipRemoved) {\n\n                    if( tipRemoved == 'success' ) {\n                        document.dispatchEvent(orderTipRemove);\n                        jQuery('.woo_order_tip[data-tip=\"custom\"]').text( wootip.s.cut );\n                        jQuery('body').trigger( 'update_checkout' );\n                        jQuery('[name=\"update_cart\"]').attr('aria-disabled', false).removeAttr('disabled').trigger('click');\n                        jQuery('.woocommerce').unblock();\n                        jQuery('.woo_order_tip_remove').hide();\n                        jQuery('.woo_order_tip').removeClass('active');\n                    }\n\n                }\n\n            });\n\n        }\n\n    }\n\n    jQuery(function() {\n\n        jQuery('body').on('click', '.woo_order_tip', function(evt){\n            evt.preventDefault();\n            WooOrderTip.selectTip( jQuery(this) );\n        });\n\n        jQuery('.woo_order_tip_custom_text').on('keypress', function(evt){\n            console.log(evt);\n            if( evt.which == 13 ) {\n                evt.preventDefault();\n                return false;\n            }\n        });\n \n        jQuery('body').on('change', '.woo_order_tip_custom_text', function(evt){\n            jQuery(this).val( jQuery(this).val().replace(/[^0-9.,]/g, '') );\n        });\n     \n        jQuery('body').on('click', '.woo_order_tip_apply', function(evt){\n            evt.preventDefault();\n            WooOrderTip.applyTip( jQuery(this) );\n        });\n     \n        jQuery('body').on('change', '#woo_recurring_tip', function(evt){\n            evt.preventDefault();\n            WooOrderTip.applyTip( jQuery(this) );\n        });\n     \n        jQuery('body').on('click', '.woo_order_tip_remove', function(evt){\n            evt.preventDefault();\n            WooOrderTip.removeTip();\n        });\n        \n    });\n\n})(jQuery);"],"names":["jQuery","orderTipPlacedEvent","CustomEvent","orderTipRemove","WooOrderTip","selectTip","trigger","applyTip","parent","find","removeClass","addClass","data","toggle","focus","container","parents","tip_type","tip_type_symbol","wootip","cs","tip_custom","tip_cash","tip_recurring","is","errors","tip","Math","abs","tip_label","val","parseInt","css","block","message","ajax","type","url","au","dataType","action","security","n","success","tipApplied","status","text","s","cut","replace","ds","length","attr","removeAttr","show","hide","document","dispatchEvent","unblock","removeTip","eart","confirm","rtc","doRemoveTip","n2","tipRemoved","on","evt","preventDefault","this","console","log","which"],"sourceRoot":""}